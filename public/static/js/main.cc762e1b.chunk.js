(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n(12),c=n.n(s),i=n(5),r=(n(19),n(6)),j=n(2),u=(n(20),n(1));var l=function(e){var t=e.onLogin,n=Object(o.useState)(""),s=Object(r.a)(n,2),c=s[0],i=s[1],l=Object(j.g)();return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c})};fetch("/login",n).then((function(e){200!==e.status||201!==e.status?e.json().then((function(e){console.log(e)})):e.json().then((function(e){console.log("inside login component",e),t(e),i(""),l.push("/me")}))}))},children:[Object(u.jsx)("input",{type:"text",value:c,onChange:function(e){return i(e.target.value)}}),Object(u.jsx)("button",{type:"submit",children:"Login"})]})};var a=function(e){e.onLogin;var t=Object(o.useState)(""),n=Object(r.a)(t,2);return n[0],n[1],Object(j.g)(),Object(u.jsx)("div",{})};var b=function(e){var t=e.book;return Object(u.jsxs)("article",{children:[t.title,", by ",t.author]})};var h=function(e){var t=e.user.books.map((function(e){return Object(u.jsx)(b,{book:e},e.id)}));return Object(u.jsx)("ul",{children:t})};var f=function(e){var t=e.user,n=e.setUser,o=Object(j.g)();function s(){console.log("inside handleLogout, before DELETE request, user: ",t),fetch("/logout",{method:"DELETE"}).then((function(){n(null),console.log("inside first and only .then after user is set to null, user: ",t),o.push("/me")}))}return Object(u.jsx)(u.Fragment,{children:function(){if(t)return Object(u.jsxs)("main",{className:"profile",children:[Object(u.jsxs)("p",{children:[t.firstname," ",t.lastname]}),Object(u.jsx)("p",{children:t.username}),Object(u.jsx)("p",{children:t.email}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{onClick:s,children:"Logout"}),Object(u.jsx)(h,{user:t})]})}()})};var O=function(){var e=Object(o.useState)(null),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)(""),b=Object(r.a)(c,2);function h(e){s(e)}return b[0],b[1],console.log("on document load",n),Object(o.useEffect)((function(){console.log("inside first line of useEffect hook"),fetch("/me").then((function(e){e.json().then((function(e){console.log("inside second .then in useEffect hook, the response object: ",e),console.log("state of user obj in react: ",n),404===e.status?s(null):(s(e),console.log("state of user object in react",n))}))}))}),[]),console.log("this renders"),Object(u.jsxs)("div",{className:"app",children:[Object(u.jsxs)("nav",{className:"nav",children:[Object(u.jsx)(i.b,{to:"/login",children:"Login"}),Object(u.jsx)(i.b,{to:"/signup",children:"Signup"})]}),Object(u.jsxs)(j.d,{children:[Object(u.jsx)(j.b,{path:"/login",children:n?Object(u.jsx)(j.a,{to:"/profile"}):Object(u.jsx)(l,{onLogin:h})}),Object(u.jsx)(j.b,{path:"/signup",children:n?Object(u.jsx)(j.a,{to:"/profile"}):Object(u.jsx)(a,{onLogin:h})}),Object(u.jsx)(j.b,{path:"/profile",children:n?Object(u.jsx)(f,{user:n,setUser:s}):Object(u.jsx)(j.a,{to:"/login"})})]})]})};c.a.render(Object(u.jsx)(i.a,{children:Object(u.jsx)(O,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.cc762e1b.chunk.js.map