{"version":3,"sources":["components/Login.js","components/Signup.js","components/BookCard.js","components/BooksPanel.js","components/Profile.js","App.js","index.js"],"names":["Login","onLogin","useState","username","setUsername","history","useHistory","onSubmit","e","preventDefault","configObj","method","headers","body","JSON","stringify","fetch","then","r","status","json","error","console","log","userData","push","type","value","onChange","target","Signup","BookCard","book","title","author","BooksPanel","displayBooks","user","books","map","id","Profile","setUser","handleLogout","className","firstname","lastname","email","onClick","displayUser","App","handleLogin","useEffect","to","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cc762e1b.chunk.js","sourcesContent":["import React from 'react';\nimport { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nfunction Login({ onLogin }) {\n  // const localURL = \"http://localhost:3000\";\n  \n  const [ username, setUsername ] = useState(\"\");\n\n  const history = useHistory();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const configObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ username })\n    };\n    fetch(`/login`, configObj)\n      .then(r => {\n        if (r.status !== 200 || r.status !== 201) {\n          r.json().then(error => {\n            console.log(error);\n          });\n        } else {\n          r.json().then(userData => {\n            console.log(\"inside login component\", userData);\n            onLogin(userData);\n            setUsername(\"\");\n            history.push(\"/me\");\n          });\n        }\n      });      \n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"text\"\n        value={username}\n        onChange={(e) => setUsername(e.target.value)}\n      />\n      <button type=\"submit\">Login</button>\n    </form>\n  )\n}\n\nexport default Login;\n","\nimport { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nfunction Signup({ onLogin }) {\n  const localURL = \"http://localhost:3000\";\n\n  const [username, setUsername] = useState(\"\");\n\n  const history = useHistory();\n\n  function handleSignup(e) {\n    e.preventDefault();\n    const configObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\"username\": username})\n    };\n    fetch(`${localURL}/signup`, configObj)\n      .then(r => r.json())\n      .then(userData => {\n        console.log(userData);\n        onLogin(userData);\n        setUsername(\"\");\n        history.push(\"/me\")\n      });\n  }\n\n  return (\n    <div>\n      \n    </div>\n  );\n}\n\nexport default Signup;\n","import React from 'react';\n\nfunction BookCard({ book }) {\n  return (\n    <article>\n      {book.title}, by {book.author}\n    </article>\n  );\n}\n\nexport default BookCard;\n","import React from 'react';\n\nimport BookCard from './BookCard';\n\nfunction BooksPanel({ user }) {\n  const books = user.books;\n\n  const displayBooks = books.map(book => {\n    return (\n      <BookCard key={book.id} book={book} />\n    );\n  })\n\n  return (\n    <ul>\n      {displayBooks}\n    </ul>\n  );\n}\n\nexport default BooksPanel;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport BooksPanel from './BooksPanel';\n\nfunction Profile({ user, setUser }) {\n\n  const history = useHistory();\n\n  function handleLogout() {\n    console.log(\"inside handleLogout, before DELETE request, user: \", user);\n    fetch(\"/logout\", {\n      method: \"DELETE\"\n    })\n      .then(() => {\n        setUser(null);\n        console.log(\"inside first and only .then after user is set to null, user: \", user);\n        history.push('/me');\n      });\n  }\n\n  const displayUser = () => {\n    if (user) {\n      return (\n        <main className=\"profile\">\n          <p>{user.firstname} {user.lastname}</p>\n          <p>{user.username}</p>\n          <p>{user.email}</p>\n          <br />\n          <button onClick={handleLogout}>Logout</button>\n          <BooksPanel user={user} />\n        </main>\n      );\n    }\n  }\n\n  return (\n    <>\n      {displayUser()}\n    </>\n  );\n}\n\nexport default Profile;\n","import React from 'react';\nimport { useState, useEffect } from 'react';\nimport { Switch, Route, NavLink, Redirect } from 'react-router-dom';\n\nimport './App.css';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport Profile from './components/Profile';\n\nfunction App() {\n\n  const [user, setUser] = useState(null);\n  const [ username, setUsername ] = useState(\"\");\n\n  console.log(\"on document load\", user);\n\n  useEffect(() => {\n    console.log(\"inside first line of useEffect hook\")\n    fetch(`/me`)\n      .then(r => {\n        r.json().then(userData => {\n          console.log(\"inside second .then in useEffect hook, the response object: \", userData);\n          console.log(\"state of user obj in react: \", user);\n          if (userData.status === 404)\n            setUser(null);\n          else {\n            setUser(userData);\n            console.log(\"state of user object in react\", user);\n          }\n        });\n      });\n  }, []);\n\n  console.log(\"this renders\");\n\n  function handleLogin(userData) {\n    setUser(userData);\n  }\n\n  return (\n    <div className=\"app\">\n      <nav className=\"nav\">\n        <NavLink to=\"/login\">Login</NavLink>\n        <NavLink to=\"/signup\">Signup</NavLink>\n      </nav>\n\n      <Switch>\n        <Route path=\"/login\">\n          {\n            user\n            ? <Redirect to=\"/profile\"></Redirect>\n            : <Login onLogin={handleLogin} />\n          }\n        </Route>\n        <Route path=\"/signup\">\n          {\n            user\n            ? <Redirect to=\"/profile\"></Redirect>\n            : <Signup onLogin={handleLogin} />\n          }\n        </Route>\n        <Route path=\"/profile\">\n          {\n            user\n            ? <Profile user={user} setUser={setUser} />\n            : <Redirect to=\"/login\"></Redirect>\n          }\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}